const e={brewery:{},search:{query:"",results:[],page:1,resultsPerPage:10}};var t=new class{_parentElement=document.querySelector(".search");getQuery(){return this._parentElement.querySelector(".brew-search-field").value}_clearInput(){return this._parentElement.querySelector(".brew-search-field").value=""}addHandlerSearch(e){this._parentElement.addEventListener("submit",(function(t){t.preventDefault(),e()}))}};class a{_data;_message;_errorMessage;render(e){if(!e||Array.isArray(e)&&0===e.length)return this.renderError();console.log(e),this._data=e;const t=this._generateMarkup();this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}renderError(e=this._errorMessage){const t=`\n      <div class="error">\n      <div>\n      </div>\n      <p>${e}</p>\n      </div>\n      `;this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}_clear(){this._parentElement.innerHTML=""}}var r=new class extends a{_parentElement=document.querySelector(".brewery-list");_errorMessage="No Breweries found, please try again!";_generateMarkup(){return this._data.map(this._generateMarkupPreview).join("")}_generateMarkupPreview(e){return`\n    <li class="brewery-li">\n    <a class="brewery-link" href="#${e.id}">\n      <h1 class="brewery-link-title">${e.name}</h1>\n      <p class="brewery-link-town">${e.city}, ${e.state}</p>\n    </a>\n  </li>\n    `}};var n=new class extends a{_parentElement=document.querySelector(".brewery-feature");_errorMessage="Search Brewery";addHandlerRender(e){["hashchange","load"].forEach((t=>window.addEventListener(t,e)))}_generateMarkup(){return`\n    <div class="brewery">\n    <div class="brewery-header">\n      <h1 class="brewery-feature-title">${this._data.name}</h1>\n      <p class="brewery-feature-location">${this._data.city}, ${this._data.state}</p>\n      <p class="brewery-feature-type">${this._data.breweryType} brewery</p>\n    </div>\n    <div class="brewery-info">\n      <p class="brewery-feature-phone">${this._data.phone?this._data.phone.slice(0,3)+"-"+this._data.phone.slice(3,6)+"-"+this._data.phone.slice(-4):"No phone number<br>available"}</p>\n      <a class="brewery-feature-website" href="${this._data.website}">${this._data.website?this._data.website:"No website available"}</a>\n      <div class="location-container">\n      <p class="brewery-feature-address">${this._data.street?this._data.street:"No street address available"}   ${this._data.city}, ${this._data.state}</p>\n      <p class="brewery-feature-address">${this._data.address_2?this._data.address_2:""}  </p>\n      <p class="brewery-feature-address">${this._data.address_3?this._data.address_3:""}</p>\n      </div>\n    </div>\n  </div>\n      \n      `}};var s=new class extends a{_parentElement=document.querySelector(".pagination");addHandlerClick(e){this._parentElement.addEventListener("click",(function(t){const a=t.target.closest(".page-btn");if(!a)return;console.log("PAGE BTN");const r=+a.dataset.goto;console.log(r),e(r)}))}_generateMarkup(){const e=this._data.search.results.length,t=this._data.search.page;return console.log(t),10===e&&1===t?`\n      <button data-goto="1" class="page-btn page-btn-next">\n      Page ${t+1}</button>\n      `:10===e&&t>1?`\n      <button data-goto="-1" class="page-btn page-btn-prev">Page ${t-1}</button>\n      <button data-goto="1" class="page-btn page-btn-next">Page ${t+1}</button>\n      \n      `:e<=10&&t>1?`\n      <button data-goto="-1" class="page-btn page-btn-prev">Page ${t-1}</button>\n      `:e<10&&1===t?"":void 0}};const i=async function(){try{const a=t.getQuery();await async function(t){try{e.search.query=t;const a=e.search.page,r=e.search.resultsPerPage,n=await fetch(`https://api.openbrewerydb.org/breweries?by_city=${t}&per_page=${r}&page=${a}`),s=await n.json();e.search.results=s.map((e=>({id:e.id,name:e.name,city:e.city,state:e.state})))}catch(e){console.log(e)}}(a),r.render(e.search.results),s.render(e)}catch(e){console.log(e)}},c=async function(){try{const t=window.location.hash.slice(1);await async function(t){try{if(""===t)return;const a=await fetch(`https://api.openbrewerydb.org/breweries/${t}`),r=await a.json();e.brewery=function(e){return{name:e.name,city:e.city,state:e.state,phone:e.phone,street:e.street,website:e.website_url,breweryType:e.brewery_type}}(r)}catch(e){console.log(e)}}(t),n.render(e.brewery)}catch(e){console.log(e)}},o=function(t){1===t&&e.search.page++,-1===t&&1!==e.search.page&&e.search.page--,i()};t.addHandlerSearch(i),n.addHandlerRender(c),s.addHandlerClick(o),console.log(e);
//# sourceMappingURL=index.b5e3210a.js.map
