{"mappings":"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","sources":["model.js","views/searchView.js","views/View.js","views/resultsView.js","views/breweryView.js","views/paginationView.js","controller.js"],"sourcesContent":["export const state = {\n  brewery: {},\n  search: {\n    query: \"\",\n    results: [],\n    page: 1,\n    resultsPerPage: 10,\n  },\n};\n\n// FORMATS DATA to be used in INDIVIDUAL BREWERY RENDER\nconst createBreweryObject = function (data) {\n  return {\n    name: data.name,\n    city: data.city,\n    state: data.state,\n    phone: data.phone,\n    street: data.street,\n    website: data.website_url,\n    breweryType: data.brewery_type,\n  };\n};\n\n// LOADS LIST OF BREWERIES to be RENDERED\nexport const loadSearchResults = async function (query) {\n  try {\n    state.search.query = query;\n    const page = state.search.page;\n    const perPage = state.search.resultsPerPage;\n\n    const res = await fetch(\n      `https://api.openbrewerydb.org/breweries?by_city=${query}&per_page=${perPage}&page=${page}`\n    );\n    const data = await res.json();\n    state.search.results = data.map((brew) => {\n      return {\n        id: brew.id,\n        name: brew.name,\n        city: brew.city,\n        state: brew.state,\n      };\n    });\n  } catch (err) {\n    console.log(err);\n  }\n};\n\n// LOADS individual BREWERY to be RENDERED\nexport const getBrewery = async function (id) {\n  try {\n    if (id === \"\") return;\n    const res = await fetch(`https://api.openbrewerydb.org/breweries/${id}`);\n    const data = await res.json();\n    state.brewery = createBreweryObject(data);\n  } catch (err) {\n    console.log(err);\n  }\n};\n","class SearchView {\n  _parentElement = document.querySelector(\".search\");\n\n  getQuery() {\n    const query = this._parentElement.querySelector(\".brew-search-field\").value;\n    // this._clearInput();\n    return query;\n  }\n\n  _clearInput() {\n    return (this._parentElement.querySelector(\".brew-search-field\").value = \"\");\n  }\n\n  addHandlerSearch(handler) {\n    this._parentElement.addEventListener(\"submit\", function (e) {\n      e.preventDefault();\n      handler();\n    });\n  }\n}\n\nexport default new SearchView();\n","export default class View {\n  _data;\n  _message;\n  _errorMessage;\n\n  render(data) {\n    if (!data || (Array.isArray(data) && data.length === 0))\n      return this.renderError();\n\n    console.log(data);\n    this._data = data;\n    const markup = this._generateMarkup();\n    this._clear();\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\n  }\n\n  renderError(message = this._errorMessage) {\n    const markup = `\n      <div class=\"error\">\n      <div>\n      </div>\n      <p>${message}</p>\n      </div>\n      `;\n    this._clear();\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\n  }\n\n  _clear() {\n    this._parentElement.innerHTML = \"\";\n  }\n}\n","import View from \"./View.js\";\n\nclass ResultsView extends View {\n  _parentElement = document.querySelector(\".brewery-list\");\n  _errorMessage = \"No Breweries found, please try again!\";\n\n  _generateMarkup() {\n    const markup = this._data.map(this._generateMarkupPreview).join(\"\");\n    return markup;\n  }\n\n  _generateMarkupPreview(result) {\n    return `\n    <li class=\"brewery-li\">\n    <a class=\"brewery-link\" href=\"#${result.id}\">\n      <h1 class=\"brewery-link-title\">${result.name}</h1>\n      <p class=\"brewery-link-town\">${result.city}, ${result.state}</p>\n    </a>\n  </li>\n    `;\n  }\n}\n\nexport default new ResultsView();\n","import View from \"./View.js\";\n\nclass breweryView extends View {\n  _parentElement = document.querySelector(\".brewery-feature\");\n  _errorMessage = \"Search Brewery\";\n\n  addHandlerRender(handler) {\n    [\"hashchange\", \"load\"].forEach((ev) =>\n      window.addEventListener(ev, handler)\n    );\n  }\n\n  _generateMarkup() {\n    return `\n    <div class=\"brewery\">\n    <div class=\"brewery-header\">\n      <h1 class=\"brewery-feature-title\">${this._data.name}</h1>\n      <p class=\"brewery-feature-location\">${this._data.city}, ${\n      this._data.state\n    }</p>\n      <p class=\"brewery-feature-type\">${this._data.breweryType} brewery</p>\n    </div>\n    <div class=\"brewery-info\">\n      <p class=\"brewery-feature-phone\">${\n        this._data.phone\n          ? this._data.phone.slice(0, 3) +\n            \"-\" +\n            this._data.phone.slice(3, 6) +\n            \"-\" +\n            this._data.phone.slice(-4)\n          : \"No phone number<br>available\"\n      }</p>\n      <a class=\"brewery-feature-website\" href=\"${this._data.website}\">${\n      this._data.website ? this._data.website : \"No website available\"\n    }</a>\n      <div class=\"location-container\">\n      <p class=\"brewery-feature-address\">${\n        this._data.street ? this._data.street : \"No street address available\"\n      }   ${this._data.city}, ${this._data.state}</p>\n      <p class=\"brewery-feature-address\">${\n        this._data.address_2 ? this._data.address_2 : \"\"\n      }  </p>\n      <p class=\"brewery-feature-address\">${\n        this._data.address_3 ? this._data.address_3 : \"\"\n      }</p>\n      </div>\n    </div>\n  </div>\n      \n      `;\n  }\n}\n\nexport default new breweryView();\n","import View from \"./View.js\";\n\nclass paginationView extends View {\n  _parentElement = document.querySelector(\".pagination\");\n\n  addHandlerClick(handler) {\n    this._parentElement.addEventListener(\"click\", function (e) {\n      const btn = e.target.closest(\".page-btn\");\n      if (!btn) return;\n      console.log(\"PAGE BTN\");\n\n      const goTo = +btn.dataset.goto;\n      console.log(goTo);\n      handler(goTo);\n    });\n  }\n\n  _generateMarkup() {\n    const results = this._data.search.results.length;\n    const page = this._data.search.page;\n    console.log(page);\n\n    // If there are more than one pages and on first page\n    if (results === 10 && page === 1) {\n      return `\n      <button data-goto=\"1\" class=\"page-btn page-btn-next\">\n      Page ${page + 1}</button>\n      `;\n    }\n\n    // If there are more than 2 pages and on a middle page\n    if (results === 10 && page > 1) {\n      return `\n      <button data-goto=\"-1\" class=\"page-btn page-btn-prev\">Page ${\n        page - 1\n      }</button>\n      <button data-goto=\"1\" class=\"page-btn page-btn-next\">Page ${\n        page + 1\n      }</button>\n      \n      `;\n    }\n\n    // If there are more than one Pages and on LAST PAGE\n    if (results <= 10 && page > 1) {\n      return `\n      <button data-goto=\"-1\" class=\"page-btn page-btn-prev\">Page ${\n        page - 1\n      }</button>\n      `;\n    }\n\n    // If there are is only 1 page\n    if (results < 10 && page === 1) return \"\";\n  }\n}\n\nexport default new paginationView();\n","import * as model from \"./model.js\";\nimport searchView from \"./views/searchView.js\";\nimport resultsView from \"./views/resultsView.js\";\nimport breweryView from \"./views/breweryView.js\";\nimport paginationView from \"./views/paginationView.js\";\n\nconst controlSearchResults = async function () {\n  try {\n    // 1) Get Search Query\n    const query = searchView.getQuery();\n\n    // 2) LOAD BREWERY LIST DATA\n    await model.loadSearchResults(query);\n\n    // 3) Render Brewery List\n\n    resultsView.render(model.state.search.results);\n    paginationView.render(model.state);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst controlBrewery = async function () {\n  try {\n    // 1) Get ID\n\n    const id = window.location.hash.slice(1);\n\n    // 2) LOAD BREWERY\n    await model.getBrewery(id);\n\n    // 3) Render Brewery List\n    breweryView.render(model.state.brewery);\n  } catch (err) {\n    console.log(err);\n  }\n};\n\nconst controlPagination = function (goto) {\n  if (goto === 1) model.state.search.page++;\n  if (goto === -1 && model.state.search.page !== 1) model.state.search.page--;\n  controlSearchResults();\n};\n\nconst init = function () {\n  searchView.addHandlerSearch(controlSearchResults);\n  breweryView.addHandlerRender(controlBrewery);\n  paginationView.addHandlerClick(controlPagination);\n  console.log(model.state);\n};\n\ninit();\n"],"names":["$b5393ef87a412903$export$ca000e230c0caa3e","brewery","search","query","results","page","resultsPerPage","$9b46037e764a0f6a$export$2e2bcd8739ae039","_parentElement","document","querySelector","getQuery","this","value","_clearInput","addHandlerSearch","handler","addEventListener","e","preventDefault","_data","_message","_errorMessage","render","data","Array","isArray","length","renderError","console","log","markup","_generateMarkup","_clear","insertAdjacentHTML","message","innerHTML","$83907c7a0cb8c7c7$export$2e2bcd8739ae039","$9b22af1e09ed1db1$export$2e2bcd8739ae039","map","_generateMarkupPreview","join","result","id","name","city","state","$94adffb33121bb0d$export$2e2bcd8739ae039","addHandlerRender","forEach","ev","window","breweryType","phone","slice","website","street","address_2","address_3","$34123c10f44fbbbc$export$2e2bcd8739ae039","addHandlerClick","btn","target","closest","goTo","dataset","goto","$8ce8ab0aa4e83271$var$controlSearchResults","async","perPage","res","fetch","json","brew","err","$b5393ef87a412903$export$202b8e5cb363a0c4","$8ce8ab0aa4e83271$var$controlBrewery","location","hash","website_url","brewery_type","$b5393ef87a412903$var$createBreweryObject","$b5393ef87a412903$export$7e8cbb5823db7740","$8ce8ab0aa4e83271$var$controlPagination"],"version":3,"file":"index.b5e3210a.js.map"}